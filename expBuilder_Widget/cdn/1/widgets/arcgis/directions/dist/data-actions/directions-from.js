System.register(["jimu-core"],(function(t,e){var n={};return{setters:[function(t){n.AbstractDataAction=t.AbstractDataAction,n.DataLevel=t.DataLevel,n.MutableStoreManager=t.MutableStoreManager,n.dataSourceUtils=t.dataSourceUtils,n.getAppStore=t.getAppStore}],execute:function(){t((()=>{"use strict";var t={79244:t=>{t.exports=n}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,o),i.exports}o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};o.r(r),o.d(r,{default:()=>d});var i=o(79244),a=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function u(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((o=o.apply(t,e||[])).next())}))};function u(t,e){return a(this,void 0,void 0,(function*(){if(t.length>1||e===i.DataLevel.DataSource||!function(t){var e,n,o,r;const a=(0,i.getAppStore)().getState().appStateInBuilder||(0,i.getAppStore)().getState(),{routeConfig:u,searchConfig:c}=a.appConfig.widgets[t].config;if((null===(e=a.appConfig.widgets[t].useMapWidgetIds)||void 0===e?void 0:e[0])&&(null==u?void 0:u.useUtility)&&(null===(o=null===(n=null==c?void 0:c.dataConfig)||void 0===n?void 0:n[0])||void 0===o?void 0:o.useUtility)){const t=null===(r=a.appConfig)||void 0===r?void 0:r.utilities;return!!(t&&t[u.useUtility.utilityId]&&t[c.dataConfig[0].useUtility.utilityId])}return!1}(this.widgetId))return!1;const n=t[0];if(n.records.length>=1){for(const t of n.records){const e=yield i.dataSourceUtils.changeToJSAPIGraphic(null==t?void 0:t.feature);if(!e.geometry||"point"!==e.geometry.type)return!1}return!0}}))}var c=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function u(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((o=o.apply(t,e||[])).next())}))};class d extends i.AbstractDataAction{isSupported(t,e){return c(this,void 0,void 0,(function*(){return(yield u.bind(this)(t,e))&&1===t[0].records.length}))}onExecute(t,e){return c(this,void 0,void 0,(function*(){var e;const n=(yield i.dataSourceUtils.changeToJSAPIGraphic(null===(e=t[0].records[0])||void 0===e?void 0:e.feature)).geometry;return i.MutableStoreManager.getInstance().updateStateValue(this.widgetId,"directionsFromPoint",n),!0}))}}return r})())}}}));